// main: _module.scss

//** Quickswitcher "popout"

//Quickswitcher tutorial mode (shown when Quickswitcher is opened on newly installed Discord)
.qs-tutorial.shown {
  display: none;
}

#{$quickswitcher} {
  @include size(auto, 100%);
  background: none!important;
  border-radius: 0;
  box-shadow: none!important;
  max-height: 80vh;
  padding: 0;
  div[style="width: 100%; height: 10px;"] {
    display: none;
  }
  // Quickswitcher container
  @at-root #{$quickswitchercontainer} {
    @include size(400px, 80vh);
    @include fixed(top calc(var(--titlebar-main-nav-height) - 5px) left 495px);
    background: RGB(var(--tc-color-3));
    box-shadow: 0 14px 20px 8px rgba(0, 0, 0, 0.34),0 10px 22px -8px rgba(0, 0, 0, 0.26),0 8px 38px 0 rgba(0, 0, 0, 0.28)!important;
  }
  #{$scrollerwrap} {
    display: flex;
    flex-direction: column;
    margin: 0;
    overflow-x: hidden;
    &::before {
      content: 'Top Results';
      @include size(100%, 40px);
      @include text(RGB(var(--tc-tint-9)), 14px, 400, 40px);
      background: RGB(var(--tc-color-1));
      border: 1px solid RGB(var(--tc-color-3));
      box-sizing: border-box;
      display: block;
      position: relative;
      text-indent: 10px;
    }
  }
  #{$scroller} {
    margin-top: -5px;
    max-width: 100%;
    max-height: 100%;
    overflow-y: auto;
    padding: 0;
    div[style="width: 100%; height: 15px;"] {
      display: none;
    }
    &::-webkit-scrollbar {
      width: 12px!important;
    }
    &::-webkit-scrollbar-thumb {
      border: 2px solid RGB(var(--tc-color-3))!important;
    }
    &::-webkit-scrollbar-track,
    &::-webkit-scrollbar-track-piece {
      background: none!important;
    }
  }
  // Quickswitcher empty state
  #{$quickswitcheremptystate} {
    @include flex-center;
    @include reset;
    background-image: none!important;
    flex-direction: column;
    height: 100%;
    position: relative;
    text-align: center;
    // When tips without results is visible and you first start typing,
    // it shows the empty state for a split second, so we hide the tips
    // without results when it does this so both aren't visible at the same
    // time.
    + #{$quickswitchertipswithoutresults} {
      display: none!important;
    }
    &::after {
      content: '';
      @include mask(var(--no-search-results-image), RGB(var(--contrasted-color)), $important: true);
      @include size(50px);
      position: relative;
      display: block;
      text-align: center;
      margin: 0 auto;
      opacity: 0.6;
    }
    &::before {
      content: 'Top Results';
      @include absolute(top 0 left 0);
      @include size(100%, 40px);
      @include text(RGB(var(--tc-tint-9)), 14px, 400, 40px);
      background: RGB(var(--tc-color-1));
      border: 1px solid RGB(var(--tc-color-3));
      box-sizing: border-box;
      display: block;
      text-indent: 10px;
      text-align: left;
    }
    // "Can't find results" text
    #{$quickswitcheremptystatenote} {
      @include text(RGB(var(--contrasted-color)), 16px, 400, 24px);
      margin: 20px;
      opacity: 0.6;
      order: 2;
      &::after {
        content: 'They\'re probably in another castle';
        @include text(RGB(var(--tc-tint-9)), 12px);
        display: block;
      }
    }
    // "Learn more about Quick Switcher" link
    #{$quickswitcheremptystatecta} {
      display: none;
    }
  }
  //## Quickswitcher input
  @at-root #{$quickswitcherinput} {
    @include absolute(top 1px left 1px);
    @include size(calc(100% - 2px), 28px);
    @include text(RGB(var(--contrasted-color)), 12px, 400, $transform: none);
    background: RGB(var(--tc-color-1))!important;
    border: none;
    border-radius: 0;
    box-shadow: none!important;
    box-sizing: border-box;
    opacity: 1;
    padding: 5px 30px;
    &::-webkit-input-placeholder {
      color: RGB(var(--tc-tint-6))!important;
    }
  }
  // Just in case it doesn't get move to the top nav for whatever reason,
  // this is a backup bandaid
  #{$quickswitcherinput} {
    @include fixed(top 41px left 410px);
    @include size(348px, 28px);
  }
  // Quickswitcher tips
  #{$quickswitchertipswithresults} {
    display: none;
  }
  // Fix for when nothing is shown on the quickswitcher (i.e. nothing typed)
  // https://i.imgur.com/k31i9yE.png
  #{$quickswitchertipswithoutresults} {
    @include size(100%, 80vh);
    border: none;
    display: flex!important;
    flex-wrap: wrap;
    align-items: center;
    align-content: center;
    justify-content: center;
    #{$quickswitchertipsmisccontrols} {
      display: none;
    }
    #{$quickswitchertipslistnav} {
      @include absolute(top 0 left 0);
      @include size(100%, 40px);
      visibility: hidden;
      &::before {
        content: 'Top Results';
        @include size(100%, 40px);
        @include text(RGB(var(--tc-tint-9)), 14px, 400, 40px);
        background: RGB(var(--tc-color-1));
        border: 1px solid RGB(var(--tc-color-3));
        box-sizing: border-box;
        display: block;
        position: relative;
        text-indent: 10px;
        visibility: visible;
      }
    }
    &::before {
      content: '';
      @include mask(var(--no-search-results-image), RGB(var(--contrasted-color)), $important: true);
      @include size(50px);
      display: block;
      margin: 0 auto;
      opacity: 0.6;
      position: relative;
      text-align: center;
    }
    &::after {
      content: 'Type something to search for results.';
      @include text(RGB(var(--contrasted-color)), 16px, 400, 24px);
      margin: 20px;
      opacity: 0.6;
      order: 2;
      text-align: center;
      width: 100%;
    }
  }
  // Quickswitcher guild icons
  #{$quickswitcherguildicon} {
    // Making the guild icons the same border-radius as the user avatars so they match
    border-radius: var(--user-roundness);
    &.noIcon-1a_FrS {
      background-color: RGB(var(--tc-color-5))!important;
      color: #fff!important;
    }
  }
  // Quickswitcher results
  #{$quickswitcherresult} {
    border-radius: 0;
    height: auto;
    padding: 5px 0;
  }
  // Channel # svg icon
  #{$quickswitcherchannelicon} {
    opacity: 1!important;
    path {
      fill: RGB(var(--tc-tint-6));
      opacity: 1;
    }
  }
  // Quickswitcher header
  #{$quickswitcherheader} {
    @include text(RGB(var(--tc-color-10))!important, 11px, 400, 34px);
    background: RGB(var(--tc-color-2));
    cursor: default;
    display: block;
    letter-spacing: normal;
    margin: 0 -40px 0 -10px;
    padding: 0 10px;
    width: 105%;
  }
  // Quickswitcher name container
  #{$quickswitchername} {
    padding-left: 5px;
    line-height: 25px;
  }
  // Quickswitcher match
  #{$quickswitchermatch} {
    color: RGB(var(--contrasted-color));
    margin-right: 8px;
  }
  // Quickswitcher user nickname
  #{$quickswitcherusername} {
    @include text(RGB(var(--tc-tint-6))!important, 12px);
    opacity: 1;
  }
  // Quickswitcher server name
  #{$quickswitchermisccontainer} {
    color: RGB(var(--tc-color-10));
    opacity: 1;
  }
  // Quickswitcher category name
  #{$quickswitchernote} {
    @include text(RGB(var(--tc-tint-6))!important, 12px, 400, $transform: lowercase);
    margin-top: 2px;
  }
  // Quickswitcher results focused
  #{$quickswitcherresultfocused} {
    background-color: RGB(var(--tc-color-6))!important;
    #{$quickswitcherchannelicon} {
      opacity: 1!important;
      path {
        fill: #fff;
      }
    }
    #{$quickswitchermatch},
    #{$quickswitchernote},
    #{$quickswitchermisccontainer},
    #{$quickswitcherusername} {
      color: #fff!important;
      opacity: 1;
    }
  }
}
